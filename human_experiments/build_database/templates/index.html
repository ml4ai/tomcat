{% extends "base.html" %}

{% block title %}
    {{ metadata.title or "Datasette" }}: {% for database in databases %}{{ database.name }}{% if not loop.last %}, {% endif %}{% endfor %}
{% endblock %}

{% block body_class %}index{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col">
    <h1>{{ metadata.title or "Datasette" }}{% if private %} ðŸ”’{% endif %}</h1>

<p>Welcome to the ToMCAT dataset!
The dataset currently is served via a single SQLite database
(<a href="/tomcat">tomcat</a>), but we may add
additional ones in the future. <p>

<p> Currently, there are tables for the participant information, group session,
raw fNIRS data, the testbed messages, the affective task, rest state task. More
tables will be added in the future.</p>

<p>For users who are not familiar with SQL,  we will provide some sample SQL
queries to demonstrate how to use this database and the associated Datasette
interface.</p>

<p>For more advanced users, feel free to try different queries, use the
programmatic APIs provided by Datasette, or simply download the whole SQLite
database (see the link at the bottom of the https://tomcat.ivilab.org/tomcat
page.)</p>

<p> Errata will be published here: <a href="/errata">Errata</a>.</p>
<p> Updates will be published here: <a href="/updates">Updates</a></p>
<p> The database schema diagram is available here: <a href="/assets/db_diagram.png">Database diagram.</a></p>
<p> To contact the maintainers: <a href="mailto:tomcat-dataset-maintainers@list.arizona.edu">tomcat-dataset-maintainers@list.arizona.edu</a>
<p> Sign up for our mailing list to get notifications whenever the dataset is
updated. To subscribe, send an email to <a
    href="mailto:list@list.arizona.edu">list@list.arizona.edu</a> with a blank
message body and the following subject line: <strong>subscribe tomcat-dataset-updates firstname lastname</strong>
(replace firstname and lastname with your own first name and last name).

{% for database in databases %}
    <h2 style="padding-left: 10px; border-left: 10px solid #{{ database.color }}">
        <a href="{{ urls.database(database.name) }}">{{ database.name }}</a>
        {% if database.private %} ðŸ”’{% endif %}
    </h2>
    <p>
        {% if database.show_table_row_counts %}{{ "{:,}".format(database.table_rows_sum) }} rows in {% endif %}{{ database.tables_count }} table{% if database.tables_count != 1 %}s{% endif %}{% if database.tables_count and database.hidden_tables_count %}, {% endif -%}
        {% if database.hidden_tables_count -%}
            {% if database.show_table_row_counts %}{{ "{:,}".format(database.hidden_table_rows_sum) }} rows in {% endif %}{{ database.hidden_tables_count }} hidden table{% if database.hidden_tables_count != 1 %}s{% endif -%}
        {% endif -%}
        {% if database.views_count -%}
            {% if database.tables_count or database.hidden_tables_count %}, {% endif -%}
            {{ "{:,}".format(database.views_count) }} view{% if database.views_count != 1 %}s{% endif %}
        {% endif %}
    </p>
    <p>{% for table in database.tables_and_views_truncated %}<a href="{{ urls.table(database.name, table.name) }}"{% if table.count %} title="{{ table.count }} rows"{% endif %}>{{ table.name }}</a>{% if table.private %} ðŸ”’{% endif %}{% if not loop.last %}, {% endif %}{% endfor %}{% if database.tables_and_views_more %}, <a href="{{ urls.database(database.name) }}">...</a>{% endif %}</p>
{% endfor %}

        </div>
    </div>
</div>

{% endblock %}
