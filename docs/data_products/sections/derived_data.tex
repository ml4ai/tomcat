\section{Derived data}

\subsection{Synchronization of EEG, EKG, GSR, and fNRIS Signals}

In multimodal neuroimaging studies, synchronizing signals from multiple modalities is a crucial step to conducting comprehensive studies on all these modalities together. The discrepancy between EEG and fNIRS signals' time series is an issue that researchers encounter frequently due to the limitations of recording hardware or the necessity to remove invalid signals. Additionally, these two modalities have distinct recording rates, further complicating their alignment. To facilitate comprehensive evaluation of EEG and fNIRS signals, it is essential to synchronize these two signals.

The synchronization process is a three-step approach involving the interpolation of EEG and fNIRS signals to ensure a regular interval, then noise artifacts removal, followed by resampling and synchronization of the interpolated signals at the desired sampling rate.

\subsubsection{Removing Noise in EEG Signals with Notch Filter}

EEG signals often exhibit susceptibility to artifacts, an interference that can be attributed to several sources. For instance, physiological factors such as eye movements or blinks can induce such artifacts \cite{10.3389/fnhum.2012.00278}, as can environmental elements like fluorescent lighting or grounding complications \cite{Kaya21}.

Upon thorough examination and visualization of the raw EEG data, we identified a consistent 60 Hz electrical disturbance within the signal, along with corresponding harmonics. An anomalous peak was also noted around the 5 Hz mark, potentially attributable to a grounding irregularity or an other environmental factors.

With the aid of MNE-Python \cite{GramfortEtAl2013a}, we efficiently mitigated these intrusive noises by deploying a notch filter. The filter was configured with a frequency of 60 Hz, a transition bandwidth of 9 Hz, and notch widths of 2 Hz.

\subsubsection{Mitigating Artifacts in fNIRS Signals Utilizing Bandpass Filter}

fNIRS signals are often susceptible to motion artifacts (MA) stemming from physiological activities, including cardiac and respiratory disturbances. These artifacts become particularly noticeable in the measurement of oxyhemoglobin (HbO) and deoxyhemoglobin (HbR) concentrations within the signal channels.

To address these challenges, we employed a bandpass filter as an effective noise reduction strategy. The filter was calibrated in line with the recommendations provided by \cite{Koenraadt2014}. With a low cutoff bandwidth of 0.01 Hz and a high cutoff bandwidth of 0.2 Hz for the 4th order Butterworth method, the filter was tailored to selectively allow signal components within this frequency range while attenuating components outside the range.

\subsubsection{Pre-processing EKG and GSR Signals}

To remove noise and improve peak-detection accuracy for EKG signals, we employed a finite impulse response (FIR) filter with 0.67 Hz low cutoff frequency, 45 Hz high cutoff frequency, and order of $1.5 \times \text{sampling rate}$ (where sampling rate is 500 Hz) implemented by NeuroKit2 \cite{Makowski2021neurokit}.

We removed noise and smoothed the GSR signals using a low-pass filter with a 3 Hz cutoff frequency and a $4^\text{th}$ order Butterworth filter, both implemented by Neurokit2.

\subsubsection{Synchronization of EEG, EKG, GSR, and fNIRS Signals}

After the EEG, EKG, GSR, and fNIRS signals are pre-processed to remove noise, the signals are resampled to a common sampling rate using the FFT-based resampling method \texttt{mne.filter.resample} available in the Python MNE library \cite{GramfortEtAl2013a}. To synchronize the signals, we generate a time series matching the common sampling rate of the resampled signals, with the first timestamp rounded to the nearest second. Then, the signals are interpolated to this generated time series via linear interpolation. The result of the interpolation and the synchronization process for fNIRS is shown in \autoref{fig:fnirs_filtered} and for EEG is shown in \autoref{fig:eeg_filtered}.

\subsection{Synchronizing Task Data with EEG and fNIRS Resampled Signals}

Understanding the relationship between participants' behaviors, environmental stimuli, and neuroimaging data requires a precise synchronization of task data with the corresponding EEG and fNIRS signals. By aligning these data streams, we can examine the influence of environmental stimuli on the participants' neuroimaging signals, which in turn, impact their behavior and task performance.

The process of integrating EEG and fNIRS signals with task data starts with grouping of signals by the tasks during which they were recorded, followed by the synchronization of the task data to the corresponding EEG and fNIRS signals.

\subsubsection{Grouping EEG, EKG, GSR, and fNIRS Signals by Task}

The preliminary step in our approach to synchronizing EEG, EKG, GSR, and fNIRS signals with the task data involves the grouping of the signals by the tasks during which the signals were recorded. The task data can be categorized into two distinct types: status-based and event-based data.

\paragraph{Status-based task data} This type of task data represent the current state of the task, such as task score. For each task, the grouping process of these data begins by including the signals recorded immediately before the task initiation and immediately following task completion. This ensures no data is overlooked at the boundaries of the task. Subsequently, all signals recorded between these two points are included, forming a complete set of signals associated with the task.

\paragraph{Event-based task data} This type of task data, on the other hand, correspond to specific events that occur during the task, such as affective task arousal or the submission of a valence score. For each task, we determine the EEG, EKG, GSR, and fNIRS entry associated with the first event and the last event. These signal entries, as well as all entries recorded between these points, are included into the data set related to the task.

\subsubsection{Synchronizing Task Data with EEG, EKG, GSR, and fNIRS Signals}

Having grouped the EEG, EKG, GSR, and fNIRS signals according to task type, we then proceed to synchronize these signal entries with their respective task data.

\paragraph{Status-based task data} The synchronization is accomplished by assigning the status data recorded closest in time to each EEG, EKG, GSR, and fNIRS signal entry. This method ensures that each EEG, EKG, GSR, and fNIRS entry is paired with the most representative status data.

\paragraph{Event-based task data} We assign each event data to the EEG, EKG, GSR, and fNIRS signal entry recorded at the time closest to the occurrence of the event. Those EEG, EKG, GSR, and fNIRS signal entries without a corresponding event data are left unassigned, signifying that no specific event occurred during these recordings.
