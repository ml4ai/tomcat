
.. _program_listing_file_src_cpp_getSpecVersion_getSpecVersion.cpp:

Program Listing for File getSpecVersion.cpp
===========================================

|exhale_lsh| :ref:`Return to documentation for file <file_src_cpp_getSpecVersion_getSpecVersion.cpp>` (``src/cpp/getSpecVersion/getSpecVersion.cpp``)

.. |exhale_lsh| unicode:: U+021B0 .. UPWARDS ARROW WITH TIP LEFTWARDS

.. code-block:: cpp

   // As of 2020-07-17, the binary package libyaml-cpp-dev on Ubuntu 18.04 suffers
   // from a bug where the <boost/next_prior.hpp> header is not included in
   // <yaml-cpp/yaml.h>. For this reason, we include it explicitly below.
   #include <boost/next_prior.hpp>
   
   #include <boost/filesystem.hpp>
   #include <boost/program_options.hpp>
   #include <iostream>
   #include <yaml-cpp/yaml.h>
   
   using namespace std;
   namespace po = boost::program_options;
   namespace fs = boost::filesystem;
   
   int main(int argc, char* argv[]) {
       po::options_description desc("getSpecVersion options");
       string filename;
       desc.add_options()("help,h", "Produce this help message and exit.")(
           "spec",
           po::value<string>(&filename)->required(),
           "Path to the spec YAML file.");
       po::variables_map vm;
       po::store(po::parse_command_line(argc, argv, desc), vm);
   
       if (vm.count("help")) {
           cout << desc << endl;
           return 1;
       }
   
       try {
           po::notify(vm);
       }
       catch (po::required_option& e) {
           cerr << "getSpecVersion error: " << e.what() << endl;
           return 1;
       }
   
       if (!fs::exists(filename)) {
           cerr << "getVersionSpec error: The given input spec YAML file \""
                << filename << "\" does not exist or is not a valid file." << endl;
           return 1;
       }
   
       YAML::Node node = YAML::LoadFile(filename);
       cout << node["info"]["version"] << endl;
   
       return 0;
   }
